http://192.168.2.47:8080/chapter15-client/
http://192.168.1.4:8080/chapter15-client/
,RolesAuthorization,HttpMethodPermission

http && ip.src_host==192.168.1.4 && ip.dst_host==192.168.1.4

主线，数据流:构建+改变 


从context中这么解析principals
Subject是如何保存的，保存了哪些数据



接口层面
一个Subject互相关联一个SubjectContext
SubjectContext 包含session
一个SessionKey包含一个sessionId
session包含有一个map,该map存放键值对，存放的关键数据有principals,键为PRINCIPALS_SESSION_KEY


web实现层面
WebDelegatingSubject 互相关联一个DefaultWebSubjectContext,关联一个DefaultWebSecurityManager
关联一个DefaultWebSecurityManager继承自SessionsSecurityManager(代理模式，内部包含了一个DefaultWebSessionManager),session的维护会代理给DefaultWebSessionManager
DefaultWebSessionManager包含一个sessionDao，通过SessionDao实现对session的CRUD,配置文件中使用了EnterpriseCacheSessionDAO，


DefaultSubjectContext 包括  ServletRequest,ServletResponse,DelegatingSession
DelegatingSession 关联一个sessionManager,包含一个WebSessionKey
WebSessionKey 包含servletRequest，ServletResponse，sessionId



也就是说每次请求都生成了一个Subject一个SubjectContext一个DelegatingSession，多次请求时只有sessionId是不变的.


	

